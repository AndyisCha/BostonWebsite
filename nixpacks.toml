# Nixpacks configuration for Railway deployment
providers = ["node"]

[variables]
NODE_VERSION = "18"
NPM_CONFIG_PRODUCTION = "false"

[phases.setup]
nixPkgs = ["nodejs-18_x", "npm-8_x"]
workDir = "/app/server"

[phases.install]
cmd = "cd server && npm ci"

[phases.build]
cmd = "cd server && npm run build"

[start]
cmd = "cd server && npm start"